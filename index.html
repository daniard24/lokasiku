<!DOCTYPE html>
<html>
<body>
  <p>Get your coordinates and address:</p>
  <p id="geo"></p>
  <p id="address"></p>

  <script>
    var x = document.getElementById("geo");
    var addressElement = document.getElementById("address");

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
      }
    }

    function showPosition(position) {
      var latitude = position.coords.latitude;
      var longitude = position.coords.longitude;
      x.innerHTML = "Latitude: " + latitude + ", Longitude: " + longitude;

      getAddress(latitude, longitude);
    }

    // Mengambil alamat menggunakan LocationIQ
    function getAddress(latitude, longitude) {
      var apiKey = "pk.87ae58856826854dd5c1be640547b549"; // Ganti dengan API Key Anda
      var url = `https://us1.locationiq.com/v1/reverse.php?key=${apiKey}&lat=${latitude}&lon=${longitude}&format=json`;

      fetch(url)
        .then(response => response.json())
        .then(data => {
          if (data && data.display_name) {
            var address = data.display_name;
            addressElement.innerHTML = "Address: " + address;
          } else {
            addressElement.innerHTML = "Unable to retrieve address.";
          }
        })
        .catch(error => {
          addressElement.innerHTML = "Error: " + error;
        });
    }

    function showError(error) {
      switch(error.code) {
        case error.PERMISSION_DENIED:
          x.innerHTML = "User denied the request for Geolocation."
          break;
        case error.POSITION_UNAVAILABLE:
          x.innerHTML = "Location information is unavailable."
          break;
        case error.TIMEOUT:
          x.innerHTML = "The request to get user location timed out."
          break;
        case error.UNKNOWN_ERROR:
          x.innerHTML = "An unknown error occurred."
          break;
      }
    }

    getLocation();
  </script>
</body>
</html>

